(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t.n(c),o=t(15),a=t.n(o),i=(t(21),t(16)),u=t(3),s=t(4),d=t.n(s),l="/api/persons",f=function(){return d.a.get(l).then((function(e){return e.data}))},j=function(e){return d.a.post(l,e).then((function(e){return e.data})).catch((function(e){throw e.response}))},b=function(e,n){return d.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data})).catch((function(e){throw e.response}))},h=function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return!0})).catch((function(e){throw e.response}))},m=t(0),O=function(e){var n=e.message,t=e.type;if(null===n)return null;var c={color:"error"===t?"red":"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return Object(m.jsx)("div",{style:c,children:n})},p=function(e){var n=e.handleOnSubmitPersonForm,t=Object(c.useState)(""),r=Object(u.a)(t,2),o=r[0],a=r[1],i=Object(c.useState)(""),s=Object(u.a)(i,2),d=s[0],l=s[1];return Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n({name:o,number:d}),a(""),l("")},children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:o,onChange:function(e){a(e.target.value)}})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:d,onChange:function(e){l(e.target.value)}})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var n=e.personsToShow,t=e.handleDeletePerson;return n.map((function(e){return Object(m.jsxs)("div",{children:[e.name," ",e.number," ",Object(m.jsx)("button",{type:"button",onClick:function(n){n.preventDefault(),window.confirm("Delete ".concat(e.name,"?"))&&t(e.id)},children:"remove"})]},e.id)}))},g=function(e){var n=e.handleOnChangeFilter,t=e.filterName;return Object(m.jsxs)("div",{children:["filter by: ",Object(m.jsx)("input",{value:t,onChange:function(e){n(e.target.value.trim())}})]})},v=function(){var e=Object(c.useState)(""),n=Object(u.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)([]),a=Object(u.a)(o,2),s=a[0],d=a[1],l=Object(c.useState)({message:null}),v=Object(u.a)(l,2),y=v[0],w=v[1];Object(c.useEffect)((function(){f().then((function(e){d(e)}))}),[]);var S=function(e){w({message:e.data.error,type:"error"}),setTimeout((function(){w({message:null})}),2e3)},k=t.trim(),C=k?s.filter((function(e){return e.name.toLowerCase().includes(k)})):s;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(g,{filterName:t,handleOnChangeFilter:function(e){r(e)}}),Object(m.jsx)("h3",{children:"Add a new"}),Object(m.jsx)(p,{handleOnSubmitPersonForm:function(e){s.some((function(n){return n.name===e.name}))?(e.id=s.find((function(n){return n.name===e.name})).id,window.confirm("El ".concat(e.name," ya se encuentra en la agenda, actualizar?"))&&b(e.id,e).then((function(n){d(s.map((function(n){return n.id==e.id?e:n}))),w({message:"".concat(e.name," Update correctly"),type:"succes"}),setTimeout((function(){w({message:null})}),2e3)})).catch((function(e){S(e)}))):j(e).then((function(n){d(s.concat(n)),w({message:"".concat(e.name," Added correctly"),type:"succes"}),setTimeout((function(){w({message:null})}),2e3)})).catch((function(e){S(e)}))}}),Object(m.jsx)(O,Object(i.a)({},y)),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(x,{personsToShow:C,handleDeletePerson:function(e){h(e).then((function(){d(s.filter((function(n){return n.id!==e})))})).catch((function(e){S(e)}))}})]})};a.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(v,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.3e5410ae.chunk.js.map