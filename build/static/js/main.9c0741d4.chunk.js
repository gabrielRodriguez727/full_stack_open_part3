(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t.n(c),o=t(15),u=t.n(o),a=(t(21),t(16)),i=t(3),s=t(4),d=t.n(s),l="/api/persons",b=function(){return d.a.get(l).then((function(e){return e.data}))},f=function(e){return d.a.post(l,e).then((function(e){return e.data}))},j=function(e,n){return d.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},m=function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return!0}))},h=t(0),O=function(e){var n=e.message,t=e.type;if(null===n)return null;var c={color:"error"===t?"red":"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return Object(h.jsx)("div",{style:c,children:n})},p=function(e){var n=e.handleOnSubmitPersonForm,t=Object(c.useState)(""),r=Object(i.a)(t,2),o=r[0],u=r[1],a=Object(c.useState)(""),s=Object(i.a)(a,2),d=s[0],l=s[1];return Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n({name:o,number:d}),u(""),l("")},children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:o,onChange:function(e){u(e.target.value)}})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:d,onChange:function(e){l(e.target.value)}})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.personsToShow,t=e.handleDeletePerson;return n.map((function(e){return Object(h.jsxs)("div",{children:[e.name," ",e.number," ",Object(h.jsx)("button",{type:"button",onClick:function(n){n.preventDefault(),window.confirm("Delete ".concat(e.name,"?"))&&t(e.id)},children:"remove"})]},e.id)}))},x=function(e){var n=e.handleOnChangeFilter,t=e.filterName;return Object(h.jsxs)("div",{children:["filter by: ",Object(h.jsx)("input",{value:t,onChange:function(e){n(e.target.value.trim())}})]})},g=function(){var e=Object(c.useState)(""),n=Object(i.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)([]),u=Object(i.a)(o,2),s=u[0],d=u[1],l=Object(c.useState)({message:null}),g=Object(i.a)(l,2),y=g[0],S=g[1];Object(c.useEffect)((function(){b().then((function(e){d(e)}))}),[]);var w=t.trim(),k=w?s.filter((function(e){return e.name.toLowerCase().includes(w)})):s;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(x,{filterName:t,handleOnChangeFilter:function(e){r(e)}}),Object(h.jsx)("h3",{children:"Add a new"}),Object(h.jsx)(p,{handleOnSubmitPersonForm:function(e){var n=s.find((function(n){return n.name===e.name}));n?(n.number=e.number,window.confirm("El ".concat(e.name," ya se encuentra en la agenda, actualizar?"))&&j(n.id,n).then((function(e){d(s.map((function(e){return e.id==n.id?n:e}))),S({message:"".concat(n.name," Update correctly"),type:"succes"}),setTimeout((function(){S({message:null})}),2e3)}))):f(e).then((function(n){d(s.concat(n)),S({message:"".concat(e.name," Added correctly"),type:"succes"}),setTimeout((function(){S({message:null})}),2e3)}))}}),Object(h.jsx)(O,Object(a.a)({},y)),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(v,{personsToShow:k,handleDeletePerson:function(e){var n=s.find((function(n){return n.id===e}));m(e).then((function(){d(s.filter((function(n){return n.id!==e})))})).catch((function(){S({message:"".concat(n.name," Was deleted on the server"),type:"error"}),d(s.filter((function(n){return n.id!==e}))),setTimeout((function(){S({message:null})}),2e3)}))}})]})};u.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.9c0741d4.chunk.js.map